<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro de Usuarios</title>
    <link rel="stylesheet" href="/css/usuarios.css">
</head>

<body class="usuarios-bg">

<div class="usuarios-container">

<header class="usuarios-header">
    <div class="header-left">
        <!-- AHORA VA AL PANEL (/home) -->
        <a th:href="@{/home}" class="back-link">← Volver al panel</a>
    </div>
    <h1>REGISTRO DE USUARIOS</h1>
    <div class="header-right"></div>
</header>

    <div class="usuarios-grid">

        <section class="card form-card">
            <h2 th:text="${usuario != null and usuario.id != null ? 'Actualizar usuario' : 'Registrar usuario'}">
                Registrar usuario
            </h2>

            <form th:action="@{/usuarios/guardar}" method="post" class="user-form">
                <input type="hidden" name="id" th:value="${usuario.id}" />

                <div class="form-group">
                    <label for="nombrecompleto">Nombre completo</label>
                    <input type="text" id="nombrecompleto" name="nombrecompleto"
                           th:value="${usuario.nombrecompleto}" required>
                </div>

                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username"
                           th:value="${usuario.username}" required>
                </div>

                <div class="form-group">
                    <label for="clave">Contraseña</label>
                    <input type="password" id="clave" name="clave"
                           th:value="${usuario.clave}" required>
                </div>

                <div class="form-group">
                    <label for="correo">Correo</label>
                    <input type="email" id="correo" name="correo"
                           th:value="${usuario.correo}" required>
                </div>

                <div class="form-group">
                    <label for="rol">Rol</label>
                    <select id="rol" name="rol">
                        <option th:selected="${usuario.rol == 'Administrador'}">Administrador</option>
                        <option th:selected="${usuario.rol == 'Vendedor'}">Vendedor</option>
                        <option th:selected="${usuario.rol == 'Usuario'}">Usuario</option>
                    </select>
                </div>

                <button type="submit" class="btn-primary"
                        th:if="${usuario.id == null}">
                    Guardar
                </button>

                <button type="submit" class="btn-update"
                        th:if="${usuario.id != null}">
                    Actualizar
                </button>

            </form>
        </section>

        <section class="card table-card">
            <h2>Listado de usuarios</h2>

            <table class="users-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre completo</th>
                    <th>Usuario</th>
                    <th>Email</th>
                    <th>Rol</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="u : ${usuarios}">
                    <td th:text="${u.id}">1</td>
                    <td th:text="${u.nombrecompleto}">Nombre ejemplo</td>
                    <td th:text="${u.username}">usuario</td>
                    <td th:text="${u.correo}">correo@dominio.com</td>
                    <td th:text="${u.rol}">Administrador</td>
                    <td class="acciones">
                        <a th:href="@{'/usuarios/editar/' + ${u.id}}" class="link-editar">Editar</a>
                        <a th:href="@{'/usuarios/eliminar/' + ${u.id}}" class="link-eliminar">Eliminar</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </section>

    </div>

</div>

</body>
</html>
